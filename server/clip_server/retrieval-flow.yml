jtype: Flow
version: '1'
with:
  port: 61000
executors:
  - name: encoder
    uses:
      jtype: CLIPEncoder
      metas:
        py_modules:
          - clip_server.executors.clip_torch
    replicas: 1
  - name: indexer
    uses:
      jtype: AnnLiteIndexer
      with:
        dim: 128
        data_path: workspace
      metas:
        py_modules:
          - annlite.executor
    shards: 5
    polling: {'/index': 'ANY', '/search': 'ALL', '/update': 'ALL', '/delete': 'ALL', '/status': 'ALL'}
